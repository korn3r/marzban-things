{
  "log": {
    "disabled": true,
    "level": "warn"
  },
  "dns": {
    "servers": [
      {
        "tag": "dns-remote",
        "address": "one.one.one.one",
        "address_resolver": "dns-local",
        "detour": "proxy"
      },
      {
        "tag": "dns-local",
        "address": "local",
        "detour": "direct"
      }
    ],
    "rules": [
      {
        "domain_suffix": [
          ".ru",
          ".su",
          ".рф",
          ".рус",
          ".ru.net",
          ".москва",
          ".moscow",
          ".intranet",
          ".internal",
          ".private",
          ".corp",
          ".home",
          ".lan",
          ".local",
          ".loc",
          ".localdomain",
          ".example",
          ".invalid",
          ".localhost",
          ".test",
          ".router",
          ".ts.net",
          ".home.arpa",
          ".hiwifi.com",
          ".tplinkwifi.net",
          ".tendawifi.com",
          ".plex.direct",
          ".router.ctc",
          ".phicomm.me",
          ".peiluyou.com",
          ".127.in-addr.arpa",
          ".0.in-addr.arpa",
          ".10.in-addr.arpa",
          ".16.172.in-addr.arpa",
          ".17.172.in-addr.arpa",
          ".18.172.in-addr.arpa",
          ".19.172.in-addr.arpa",
          ".20.172.in-addr.arpa",
          ".21.172.in-addr.arpa",
          ".22.172.in-addr.arpa",
          ".23.172.in-addr.arpa",
          ".24.172.in-addr.arpa",
          ".25.172.in-addr.arpa",
          ".26.172.in-addr.arpa",
          ".27.172.in-addr.arpa",
          ".28.172.in-addr.arpa",
          ".29.172.in-addr.arpa",
          ".30.172.in-addr.arpa",
          ".31.172.in-addr.arpa",
          ".168.192.in-addr.arpa",
          ".254.169.in-addr.arpa",
          ".localhost.ptlogin2.qq.com",
          ".localhost.sec.qq.com",
          ".d.f.ip6.arpa",
          ".b.e.f.ip6.arpa",
          ".a.e.f.ip6.arpa",
          ".9.e.f.ip6.arpa",
          ".8.e.f.ip6.arpa",
          ".113.0.203.in-addr.arpa",
          ".100.51.198.in-addr.arpa",
          ".2.0.192.in-addr.arpa",
          ".255.255.255.255.in-addr.arpa",
          ".8.b.d.0.1.0.0.2.ip6.arpa",
          ".1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa",
          ".0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa"
                ],
        "server": "dns-local"
      },
      {
        "domain": [
          "captive.apple.com",
          "connectivitycheck.gstatic.com",
          "securelogin.arubanetworks.com",
          "msftconnecttest.com",
          "detectportal.firefox.com",
          "instant.arubanetworks.com",
          "setmeup.arubanetworks.com",
          "asusrouter.com",
          "router.asus.com",
          "www.asusrouter.com",
          "oasisauth.h3c.com",
          "routerlogin.com",
          "www.routerlogin.com",
          "tplogin.cn",
          "miwifi.com",
          "www.miwifi.com",
          "vk.cc",
          "yandex.com",
          "yandex.md",
          "yandex.net",
          "yastatic.net",
          "avito.st",
          "userapi.com",
          "lenta.com",
          "ozonusercontent.com",
          "2gis.com",
          "kpcdn.com",
          "kp.house",
          "kp.kg",
          "kaspersky-labs.com",
          "kaspersky.com",
          "yadro.com",
          "livejournal.com",
          "livejournal.net",
          "habr.com",
          "habrstorage.org"
                ],
        "server": "dns-local"
      },
      {
        "domain_suffix": [
          ".vk.com",
          ".vk.cc",
          ".yandex.com",
          ".yandex.md",
          ".yandex.net",
          ".yastatic.net",
          ".avito.st",
          ".userapi.com",
          ".lenta.com",
          ".ozonusercontent.com",
          ".2gis.com",
          ".kpcdn.net",
          ".kp.house",
          ".kp.kg",
          ".kaspersky-labs.com",
          ".kaspersky.com",
          ".yadro.com",
          ".livejournal.com",
          ".livejournal.net",
          ".habr.com",
          ".habrastorage.org"
        ],
        "server": "dns-local"
      }
    ],
    "final": "dns-remote",
    "strategy": "prefer_ipv4"
  },
  "inbounds": [
    {
      "type": "tun",
      "tag": "tun-in",
      "interface_name": "sing-tun",
      "address": [
        "172.19.0.1/30",
        "fdfe:dcba:9876::1/126"
      ],
      "auto_route": true,
      "route_exclude_address": [
        "192.168.0.0/16",
        "fc00::/7"
      ],
      "domain_strategy": "prefer_ipv4"
    }
  ],
  "outbounds": [
    {
      "type": "selector",
      "tag": "proxy",
      "outbounds": null,
      "interrupt_exist_connections": true
    },
    {
      "type": "direct",
      "tag": "direct"
    }
  ],
  "route": {
    "rules": [
      {
        "action": "sniff"
      },
      {
        "protocol": "dns",
        "action": "hijack-dns"
      },
      {
        "domain_suffix": [
          ".ru",
          ".рф",
          ".su",
          ".рус",
          ".ru.net",
          ".москва",
          ".moscow",
          ".intranet",
          ".internal",
          ".private",
          ".corp",
          ".home",
          ".lan",
          ".local",
          ".loc",
          ".localdomain",
          ".example",
          ".invalid",
          ".localhost",
          ".test",
          ".router",
          ".ts.net",
          ".home.arpa",
          ".hiwifi.com",
          ".tplinkwifi.net",
          ".tendawifi.com",
          ".plex.direct",
          ".router.ctc",
          ".phicomm.me",
          ".peiluyou.com",
          ".127.in-addr.arpa",
          ".0.in-addr.arpa",
          ".10.in-addr.arpa",
          ".16.172.in-addr.arpa",
          ".17.172.in-addr.arpa",
          ".18.172.in-addr.arpa",
          ".19.172.in-addr.arpa",
          ".20.172.in-addr.arpa",
          ".21.172.in-addr.arpa",
          ".22.172.in-addr.arpa",
          ".23.172.in-addr.arpa",
          ".24.172.in-addr.arpa",
          ".25.172.in-addr.arpa",
          ".26.172.in-addr.arpa",
          ".27.172.in-addr.arpa",
          ".28.172.in-addr.arpa",
          ".29.172.in-addr.arpa",
          ".30.172.in-addr.arpa",
          ".31.172.in-addr.arpa",
          ".168.192.in-addr.arpa",
          ".254.169.in-addr.arpa",
          ".localhost.ptlogin2.qq.com",
          ".localhost.sec.qq.com",
          ".d.f.ip6.arpa",
          ".b.e.f.ip6.arpa",
          ".a.e.f.ip6.arpa",
          ".9.e.f.ip6.arpa",
          ".8.e.f.ip6.arpa",
          ".113.0.203.in-addr.arpa",
          ".100.51.198.in-addr.arpa",
          ".2.0.192.in-addr.arpa",
          ".255.255.255.255.in-addr.arpa",
          ".8.b.d.0.1.0.0.2.ip6.arpa",
          ".1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa",
          ".0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa"
        ],
        "outbound": "direct"
      },
      {
        "domain": [
          "captive.apple.com",
          "connectivitycheck.gstatic.com",
          "securelogin.arubanetworks.com",
          "msftconnecttest.com",
          "detectportal.firefox.com",
          "instant.arubanetworks.com",
          "setmeup.arubanetworks.com",
          "asusrouter.com",
          "router.asus.com",
          "www.asusrouter.com",
          "oasisauth.h3c.com",
          "routerlogin.com",
          "www.routerlogin.com",
          "tplogin.cn",
          "miwifi.com",
          "www.miwifi.com",
          "vk.com",
          "vk.cc",
          "yandex.com",
          "yandex.md",
          "yandex.net",
          "yastatic.net",
          "avito.st",
          "userapi.com",
          "lenta.com",
          "ozonusercontent.com",
          "2gis.com",
          "kpcdn.com",
          "kp.house",
          "kp.kg",
          "kaspersky-labs.com",
          "kaspersky.com",
          "yadro.com",
          "livejournal.com",
          "livejournal.net",
          "habr.com",
          "habrstorage.org"
                ],
        "outbound": "direct"
      },
      {
        "domain_suffix": [
          ".vk.com",
          ".vk.cc",
          ".yandex.com",
          ".yandex.md",
          ".yandex.net",
          ".yastatic.net",
          ".avito.st",
          ".userapi.com",
          ".lenta.com",
          ".ozonusercontent.com",
          ".2gis.com",
          ".kpcdn.net",
          ".kp.house",
          ".kp.kg",
          ".kaspersky-labs.com",
          ".kaspersky.com",
          ".yadro.com",
          ".livejournal.com",
          ".livejournal.net",
          ".habr.com",
          ".habrastorage.org"
        ],
        "outbound": "direct"
      },
      {
        "ip_is_private": true,
        "outbound": "direct"
      },
      {
        "rule_set": ["geoip-ru"],
        "outbound": "direct"
      }
    ],
    "rule_set": [
        {
            "type": "remote",
            "tag": "geoip-ru",
            "format": "binary",
            "url": "https://github.com/SagerNet/sing-geoip/raw/refs/heads/rule-set/geoip-ru.srs",
            "download_detour": "direct",
            "update_interval": "1d"
        }
    ],
    "final": "proxy",
    "auto_detect_interface": true,
    "override_android_vpn": true
  },
  "experimental": {
    "cache_file": {
      "enabled": true,
      "store_rdrc": true
    }
  }
}
